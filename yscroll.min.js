!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.YScroll=e()}(this,function(){function t(e,n){return this instanceof t?this.init.call(this,e,n):new t(e,n)}window;var e=document,n=Math.round,r=Math.abs,i=function(t,e){var i=this,s=e.createElement("div"),a=["webkit","moz","o","ms"],o={},c=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},l=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n))return!0;return!1},u=function(t){return l(t,function(t){return void 0!==s.style[t]})};return i.some=l,i.getCSSVal=function(t){if(void 0!==s.style[t])return t;var e;return l(a,function(n){var r=c(n)+c(t);if(void 0!==s.style[r])return e="-"+n+"-"+t,!0}),e},i.setStyle=function(t,e,n){var r=o[e];r?t[r]=n:void 0!==t[e]?(o[e]=e,t[e]=n):l(a,function(r){var i=c(r)+c(e);if(void 0!==t[i])return o[e]=i,t[i]=n,!0})},i.saveProp=o,i.hasProp=u,i.transform3d=u(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),i.transform=u(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]),i.transition=u(["transitionProperty","WebkitTransitionProperty","MozTransitionProperty","OTransitionProperty","msTransitionProperty"]),i.cssAnimation=(i.transform3d||i.transform)&&i.transition,i.getTriangleSide=function(t,e,n,i){var s=r(t-n),a=r(e-i);return{x:s,y:a,z:Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}},i.getAngle=function(t){var e=t.y/t.z,n=Math.acos(e);return 180/(Math.PI/n)},i.momentum=function(t,e,i,s,a,o){var c,l,u=t-e,v=r(u)/i;return c=t+v*v/.0012*o,l=v/6e-4,c<s?l=(u=r((c=a?s-a/2.5*(v/8):s)-t))/v:c>0&&(c=a?a/2.5*(v/8):0,l=(u=r(t)+c)/v),{dist:n(c),duration:l}},i}(0,e);return t.prototype={constructor:t,ease:{quadratic:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",circular:"cubic-bezier(0.1, 0.57, 0.1, 1)",back:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",elastic:"cubic-bezier(0, 0, 0.25, 1)"},DISTANCE_THRESHOLD:5,ANGLE_THREHOLD:55,init:function(t,n){var r=this;if("string"==typeof t&&""!==t&&(t=e.querySelector(t)),!t)throw new Error("element not found");return n=n||{},r.distance=n.distance,r.bounceTime=n.bounceTime||350,r.isScroll=void 0===n.distance,r.curDist=0,r.gestureStart=!1,r.events={start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel",transitionend:i.hasProp(["transition"])?"transitionend":"webkitTransitionEnd"},r.cssAnimation=void 0===n.cssAnimation?i.cssAnimation:n.cssAnimation,r.isScroll?(r.wrapper=t,r.scroller=t.children[0],r.wrapperWidth=t.clientWidth,r.maxDist=r.wrapperWidth-r.scroller.clientWidth,r.scroller.addEventListener(r.events.transitionend,r,!1),r.bounceEasing=r.ease.quadratic):(r.scroller=t,r.curPoint=0,r.maxPoint=void 0!==n.maxPoint?n.maxPoint:t.children.length-1,r.maxDist=-r.distance*(r.maxPoint-1),r.bounceEasing=r.ease.elastic),r.scrollerStyle=r.scroller.style,r.cssAnimation?r._setStyle({transitionProperty:i.getCSSVal("transform"),transitionTimingFunction:r.bounceEasing,transitionDuration:"0ms",transform:r._getTranslate(0,0)}):r._setStyle({position:"relative",left:"0px",top:"0px"}),r.scroller.addEventListener(r.events.start,r,!1),r},refresh:function(){var t=this;t.isScroll?(t.wrapperWidth=t.wrapper.clientWidth,t.maxDist=t.wrapperWidth-t.scroller.clientWidth):(t.curPoint=0,t.maxPoint=el.children.length-1,t.maxDist=-t.distance*(t.maxPoint-1)),t._setDist(0,0)},handleEvent:function(t){var e=this,n=e.events;switch(t.type){case n.start:e._start(t);break;case n.move:e._move(t);break;case n.end:case n.cancel:e._end(t);break;case n.transitionend:e._transitionEnd(t);break;case"click":e._click(t)}},_start:function(t){var n=this;if(!n.scrolling){n.scroller.addEventListener(n.events.move,n,!1),e.addEventListener(n.events.end,n,!1),n.cssAnimation&&n._setStyle({transitionDuration:"0ms"});var r=t.changedTouches?t.changedTouches[0]:t;n.startPageX=r.pageX,n.startPageY=r.pageY,n.basePageX=n.startPageX,n.basePageY=n.startPageY,n.direction=0,n.scrolling=!0,n.moveReady=!1,n.startTime=t.timeStamp,n.endTime=0,n._triggerEvent("sTouchstart",!0,!1)}},_move:function(t){var e=this;if(e.scrolling){var r=t.changedTouches?t.changedTouches[0]:t,s=r.pageX,a=r.pageY;if(e.moveReady){t.preventDefault();var o=s-e.basePageX,c=e.curDist+o;(c>=0||c<e.maxDist)&&(c=n(e.curDist+o/3));var l=o>0?1:-1,u=!e._triggerEvent("sTouchmove",!0,!0,{delta:o,direction:l});if(e.direction=l,u)e._touchAfter({moved:!1,cancelled:!0});else{var v=[c,0];e._setDist.apply(e,v)}}else{var d=i.getTriangleSide(e.startPageX,e.startPageY,s,a);d.z>e.DISTANCE_THRESHOLD&&(i.getAngle(d)>e.ANGLE_THREHOLD?(t.preventDefault(),e.moveReady=!0,e.scroller.addEventListener("click",e,!0)):e.scrolling=!1)}e.basePageX=s,e.basePageY=a}},_end:function(t){var n=this;if(n.scroller.removeEventListener(n.events.move,n,!1),e.removeEventListener(n.events.end,n,!1),n.scrolling){if(n.isScroll){if(!n.resetDist()){var s=t.timeStamp-n.startTime,a=0,o=n.basePageX,c=r(o-n.startPageX);if(s<300&&c>30){var l=i.momentum(n.basePageX,n.startPageX,s,n.maxDist,n.wrapperWidth,n.direction);o=l.dist,a=l.duration,n.isInTransition=1,n.cssAnimation||(o>=0?o=0:o<n.maxDist&&(o=n.maxDist))}n.basePageX!=o&&(n._scrollTo(o,0,a),n.isInTransition=!!(a>0))}}else{var u=-n.curDist/n.distance;(u=n.direction<0?Math.ceil(u):n.direction>0?Math.floor(u):Math.round(u))<0?u=0:u>n.maxPoint&&(u=n.maxPoint),n.moveToPoint(u)}n._touchAfter({moved:!1,cancelled:!1})}},_transitionEnd:function(t){var e=this;t.target==e.scroller&&e.isInTransition&&e.resetDist()&&(e.isInTransition=!1)},_click:function(t){t.preventDefault(),t.stopPropagation()},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},destroy:function(){var t=this;t.scroller.removeEventListener(t.events.start,t,!1)},_triggerEvent:function(t,n,r,i){var s=this,a=e.createEvent("Event");if(a.initEvent(t,n,r),i)for(var o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);return s.scroller.dispatchEvent(a)},_touchAfter:function(t){var e=this;e.scrolling=!1,e.moveReady=!1,e.startTime=0,setTimeout(function(){e.scroller.removeEventListener("click",e,!0)},200),e._triggerEvent("sTouchend",!0,!1,t)},_getTranslate:function(t,e){return"translate3d("+t+"px, "+e+"px, 0)"},_setStyle:function(t){var e=this.scrollerStyle;for(var n in t)i.setStyle(e,n,t[n])},_setDist:function(t,e){var n=this,r=n.scrollerStyle,s=t;n.cssAnimation?r[i.saveProp.transform]=n._getTranslate(t,e):r.left=s+"px",n.curDist=s},_scrollTo:function(t,e,n){var r=this;n=n||0,r.cssAnimation?(r.scrollerStyle[i.saveProp.transitionDuration]=n+"ms",r._setDist(t,e)):(r._animDist=r.curDist,r._animate(t,n||r.bounceTime),r.curDist=t)},_animate:function(t,e){var n=this,r=(n.scroller,n.scroller.style),i=+new Date,s=parseInt(e,10),a=n._animDist,o=function(t,e){return-(t/=e)*(t-2)},c=setInterval(function(){var e,l=+new Date-i;l>s?(clearInterval(c),e=t):e=o(l,s)*(t-a)+a,n.vertical?r.top=e+"px":r.left=e+"px"},10)},resetDist:function(){var t=this,e=t.curDist;return e>0?e=0:e<t.maxDist&&(e=t.maxDist),e!=t.curDist&&(t._setDist(e,0),!0)},moveToPoint:function(t,e,n){var r=this,i=r.curPoint;t=void 0===t?r.curPoint:parseInt(t,10),e=void 0===e?r.bounceTime:parseInt(e,10),t<0?t=0:t>r.maxPoint&&(t=r.maxPoint),r.curPoint=t,i!=r.curPoint&&r._triggerEvent("sPointmove",!0,!1,{prevPoint:i,curPoint:r.curPoint}),r._scrollTo(-r.curPoint*r.distance,0,e),n&&n()}},t});