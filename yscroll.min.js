!function(t,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?module.exports=i():t.YScroll=i()}(this,function(){function t(i,s){return this instanceof t?this.init.call(this,i,s):new t(i,s)}window;var i=document,s=Math.round,e=Math.abs,n=function(t,i){var n=i.createElement("div"),r=["webkit","moz","o","ms"],a={},o=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},h=function(t,i){for(var s=0,e=t.length;s<e;s++)if(i(t[s],s))return!0;return!1},c=function(t){return h(t,function(t){return void 0!==n.style[t]})};return this.some=h,this.getCSSVal=function(t){if(void 0!==n.style[t])return t;var i;return h(r,function(s){var e=o(s)+o(t);if(void 0!==n.style[e])return i="-"+s+"-"+t,!0}),i},this.setStyle=function(t,i,s){var e=a[i];e?t[e]=s:void 0!==t[i]?(a[i]=i,t[i]=s):h(r,function(e){var n=o(e)+o(i);if(void 0!==t[n])return a[i]=n,t[n]=s,!0})},this.saveProp=a,this.hasProp=c,this.transform3d=c(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),this.transform=c(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]),this.transition=c(["transitionProperty","WebkitTransitionProperty","MozTransitionProperty","OTransitionProperty","msTransitionProperty"]),this.cssAnimation=(this.transform3d||this.transform)&&this.transition,this.getTriangleSide=function(t,i,s,n){var r=e(t-s),a=e(i-n);return{x:r,y:a,z:Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}},this.getAngle=function(t){var i=t.y/t.z,s=Math.acos(i);return 180/(Math.PI/s)},this.momentum=function(t,i,n,r,a,o){var h,c,l=t-i,u=e(l)/n;return h=t+u*u/.0012*o,c=u/6e-4,h<r?c=(l=e((h=a?r-a/2.5*(u/8):r)-t))/u:h>0&&(h=a?a/2.5*(u/8):0,c=(l=e(t)+h)/u),{dist:s(h),duration:c}},this}(0,i);return t.prototype={constructor:t,ease:{quadratic:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",circular:"cubic-bezier(0.1, 0.57, 0.1, 1)",back:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",elastic:"cubic-bezier(0, 0, 0.25, 1)"},DISTANCE_THRESHOLD:5,ANGLE_THREHOLD:55,init:function(t,s){if("string"==typeof t&&""!==t&&(t=i.querySelector(t)),!t)throw new Error("element not found");return s=s||{},this.distance=s.distance,this.bounceTime=s.bounceTime||350,this.isScroll=void 0===s.distance,this.curDist=0,this.gestureStart=!1,this.events={start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel",transitionend:n.hasProp(["transition"])?"transitionend":"webkitTransitionEnd"},this.cssAnimation=void 0===s.cssAnimation?n.cssAnimation:s.cssAnimation,this.isScroll?(this.wrapper=t,this.scroller=t.children[0],this.wrapperWidth=t.clientWidth,this.maxDist=this.wrapperWidth-this.scroller.clientWidth,this.scroller.addEventListener(this.events.transitionend,this,!1),this.bounceEasing=this.ease.quadratic):(this.scroller=t,this.curPoint=0,this.maxPoint=void 0!==s.maxPoint?s.maxPoint:t.children.length-1,this.maxDist=-this.distance*(this.maxPoint-1),this.bounceEasing=this.ease.elastic),this.scrollerStyle=this.scroller.style,this.cssAnimation?this._setStyle({transitionProperty:n.getCSSVal("transform"),transitionTimingFunction:this.bounceEasing,transitionDuration:"0ms",transform:this._getTranslate(0,0)}):this._setStyle({position:"relative",left:"0px",top:"0px"}),this.scroller.addEventListener(this.events.start,this,!1),this},refresh:function(){this.isScroll?(this.wrapperWidth=this.wrapper.clientWidth,this.maxDist=this.wrapperWidth-this.scroller.clientWidth):(this.curPoint=0,this.maxPoint=el.children.length-1,this.maxDist=-this.distance*(this.maxPoint-1)),this._setDist(0,0)},handleEvent:function(t){var i=this.events;switch(t.type){case i.start:this._start(t);break;case i.move:this._move(t);break;case i.end:case i.cancel:this._end(t);break;case i.transitionend:this._transitionEnd(t);break;case"click":this._click(t)}},_start:function(t){if(!this.scrolling){this.scroller.addEventListener(this.events.move,this,!1),i.addEventListener(this.events.end,this,!1),this.cssAnimation&&this._setStyle({transitionDuration:"0ms"});var s=t.changedTouches?t.changedTouches[0]:t;this.startPageX=s.pageX,this.startPageY=s.pageY,this.basePageX=this.startPageX,this.basePageY=this.startPageY,this.direction=0,this.scrolling=!0,this.moveReady=!1,this.startTime=t.timeStamp,this.endTime=0,this._triggerEvent("sTouchstart",!0,!1)}},_move:function(t){if(this.scrolling){var i=t.changedTouches?t.changedTouches[0]:t,e=i.pageX,r=i.pageY;if(this.moveReady){t.preventDefault();var a=e-this.basePageX,o=this.curDist+a;(o>=0||o<this.maxDist)&&(o=s(this.curDist+a/3));var h=a>0?1:-1,c=!this._triggerEvent("sTouchmove",!0,!0,{delta:a,direction:h});if(this.direction=h,c)this._touchAfter({moved:!1,cancelled:!0});else{var l=[o,0];this._setDist.apply(this,l)}}else{var u=n.getTriangleSide(this.startPageX,this.startPageY,e,r);u.z>this.DISTANCE_THRESHOLD&&(n.getAngle(u)>this.ANGLE_THREHOLD?(t.preventDefault(),this.moveReady=!0,this.scroller.addEventListener("click",this,!0)):this.scrolling=!1)}this.basePageX=e,this.basePageY=r}},_end:function(t){if(this.scroller.removeEventListener(this.events.move,this,!1),i.removeEventListener(this.events.end,this,!1),this.scrolling){if(this.isScroll){if(!this.resetDist()){var s=t.timeStamp-this.startTime,r=0,a=this.basePageX,o=e(a-this.startPageX);if(s<300&&o>30){var h=n.momentum(this.basePageX,this.startPageX,s,this.maxDist,this.wrapperWidth,this.direction);a=h.dist,r=h.duration,this.isInTransition=1,this.cssAnimation||(a>=0?a=0:a<this.maxDist&&(a=this.maxDist))}this.basePageX!=a&&(this._scrollTo(a,0,r),this.isInTransition=!!(r>0))}}else{var c=-this.curDist/this.distance;(c=this.direction<0?Math.ceil(c):this.direction>0?Math.floor(c):Math.round(c))<0?c=0:c>this.maxPoint&&(c=this.maxPoint),this.moveToPoint(c)}this._touchAfter({moved:!1,cancelled:!1})}},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&this.resetDist()&&(this.isInTransition=!1)},_click:function(t){t.preventDefault(),t.stopPropagation()},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},destroy:function(){this.scroller.removeEventListener(this.events.start,this,!1)},_triggerEvent:function(t,s,e,n){var r=i.createEvent("Event");if(r.initEvent(t,s,e),n)for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a]);return this.scroller.dispatchEvent(r)},_touchAfter:function(t){var i=this;i.scrolling=!1,i.moveReady=!1,i.startTime=0,setTimeout(function(){i.scroller.removeEventListener("click",i,!0)},200),i._triggerEvent("sTouchend",!0,!1,t)},_getTranslate:function(t,i){return"translate3d("+t+"px, "+i+"px, 0)"},_setStyle:function(t){var i=this.scrollerStyle;for(var s in t)n.setStyle(i,s,t[s])},_setDist:function(t,i){var s=this.scrollerStyle,e=t;this.cssAnimation?s[n.saveProp.transform]=this._getTranslate(t,i):s.left=e+"px",this.curDist=e},_scrollTo:function(t,i,s){s=s||0,this.cssAnimation?(this.scrollerStyle[n.saveProp.transitionDuration]=s+"ms",this._setDist(t,i)):(this._animDist=this.curDist,this._animate(t,s||this.bounceTime),this.curDist=t)},_animate:function(t,i){var s=this,e=(s.scroller,s.scroller.style),n=+new Date,r=parseInt(i,10),a=s._animDist,o=setInterval(function(){var i,h=+new Date-n;h>r?(clearInterval(o),i=t):i=function(t,i){return-(t/=i)*(t-2)}(h,r)*(t-a)+a,s.vertical?e.top=i+"px":e.left=i+"px"},10)},resetDist:function(){var t=this.curDist;return t>0?t=0:t<this.maxDist&&(t=this.maxDist),t!=this.curDist&&(this._setDist(t,0),!0)},moveToPoint:function(t,i,s){var e=this.curPoint;t=void 0===t?this.curPoint:parseInt(t,10),i=void 0===i?this.bounceTime:parseInt(i,10),t<0?t=0:t>this.maxPoint&&(t=this.maxPoint),this.curPoint=t,e!=this.curPoint&&this._triggerEvent("sPointmove",!0,!1,{prevPoint:e,curPoint:this.curPoint}),this._scrollTo(-this.curPoint*this.distance,0,i),s&&s()}},t});